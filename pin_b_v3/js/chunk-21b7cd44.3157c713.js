(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21b7cd44"],{"08f4":function(e,t,n){},1451:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"set-pool-status"},[n("div",{staticClass:"box"},[n("span",[e._v("选择矿池")]),n("div",{staticClass:"select-container"},[n("span",[e._v(e._s(e.selectedPool?e.selectedPool.symbol:""))]),n("span",{on:{click:function(t){e.showOptions=!e.showOptions}}},[e._v("▼")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"options"},e._l(e.poolOptions,(function(t){return n("span",{on:{click:function(n){return e.selectPool(t)}}},[e._v(e._s(t.symbol))])})),0)]),n("span",[e._v("当前状态")]),n("div",{staticClass:"input-container"},[n("input",{attrs:{type:"text",readonly:""},domProps:{value:e.oldStatus}})]),n("span",[e._v("选择状态")]),n("div",{staticClass:"select-container"},[n("span",[e._v(e._s(e.newStatus?e.newStatus.type:""))]),n("span",{on:{click:function(t){e.showStatus=!e.showStatus}}},[e._v("▼")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showStatus,expression:"showStatus"}],staticClass:"options"},e._l(e.poolStatuses,(function(t){return n("span",{on:{click:function(n){return e.selectStatus(t)}}},[e._v(e._s(t.type))])})),0)]),n("van-button",{on:{click:e.setPoolStatus}},[e._v("确认")])],1)])},a=[],r=(n("99af"),n("d81d"),n("d3b7"),n("5530")),o=(n("e7e5"),n("d399")),u=(n("96cf"),n("1da1")),c=n("2307"),i=n("a981"),l=n("b9cc"),d={data:function(){return{MineV3Example:null,selectedPool:null,showOptions:!1,poolOptions:[],showStatus:!1,poolStatuses:[{type:"开启",value:!0},{type:"关闭",value:!1}],newStatus:null}},computed:{oldStatus:function(){return this.selectedPool?this.selectedPool.enable?"开启":"关闭":""}},created:function(){this.$web3&&this.init()},methods:{selectPool:function(e){this.selectedPool=e,this.showOptions=!1},selectStatus:function(e){this.newStatus=e,this.showStatus=!1},setPoolStatus:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedPool){t.next=4;break}return t.abrupt("return",o["a"].fail("请选择矿池"));case 4:if(e.newStatus){t.next=8;break}return t.abrupt("return",o["a"].fail("请选择状态"));case 8:if(e.selectedPool.enable!==e.newStatus.value){t.next=10;break}return t.abrupt("return",o["a"].fail("状态相同，无需修改"));case 10:return o["a"].loading({message:"交易中...",forbidClick:!0,duration:0,loadingType:"spinner"}),n=e.MineV3Example.methods[e.newStatus.value?"setPoolEnable":"setPoolDisable"](e.selectedPool.poolId),t.prev=12,t.next=15,n.call({from:e.$address});case 15:n.send({from:e.$address}).on("receipt",(function(t){e.selectedPool=null,e.newStatus=null,o["a"].success("设置成功")})).on("error",(function(e){console.error(e),o["a"].fail("交易失败！")})),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](12),console.error(t.t0),o["a"].fail("交易失败！");case 22:case"end":return t.stop()}}),t,null,[[12,18]])})))()},init:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e.$web3.eth.Contract(c.abi,c.address),e.MineV3Example=n,t.next=4,n.methods.poolLength().call();case 4:for(s=t.sent,a=new e.$web3.BatchRequest,r=0;r<s;r++)a.add(n.methods.pools(r).call.request());a.requestManager.sendBatch(a.requests,function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n,s){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=6;break}for(a=[],r=0;r<s.length;r++)a.push((s[r].result||s[r]).decode([{type:"address",name:"lpToken"},{type:"uint256",name:"powerTimes"},{type:"address",name:"feeMiner"},{type:"bool",name:"enable"}]));return t.next=5,e.getOptions(a);case 5:e.poolOptions=t.sent.map((function(e,t){return{poolId:t,symbol:e.symbol,enable:e.enable}}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()},getOptions:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getTokens(e);case 2:return s=n.sent,n.abrupt("return",new Promise((function(n){for(var a=new t.$web3.BatchRequest,o=0;o<s.length;o++){var u=new t.$web3.eth.Contract(l,s[o].token0),c=new t.$web3.eth.Contract(l,s[o].token1);a.add(u.methods.symbol().call.request()),a.add(c.methods.symbol().call.request())}a.requestManager.sendBatch(a.requests,(function(t,s){if(!t){for(var a=0,o=0;o<s.length;o+=2)e[a]=Object(r["a"])(Object(r["a"])({},e[a]),{},{symbol:"".concat((s[o].result||s[o]).decode(["string"]),"-").concat(s[o+1].result.decode(["string"]),"/LP")}),a++;n(e)}}))})));case 4:case"end":return n.stop()}}),n)})))()},getTokens:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){for(var s=new t.$web3.BatchRequest,a=0;a<e.length;a++){var r=new t.$web3.eth.Contract(i,e[a].lpToken);s.add(r.methods.token0().call.request()),s.add(r.methods.token1().call.request())}s.requestManager.sendBatch(s.requests,(function(e,t){if(!e){for(var s=[],a=0;a<t.length;a+=2)s.push({token0:(t[a].result||t[a]).decode(["address"]),token1:t[a+1].result.decode(["address"])});n(s)}}))})));case 1:case"end":return n.stop()}}),n)})))()}}},p=d,h=p,f=(n("acbb"),n("2877")),w=Object(f["a"])(h,s,a,!1,null,"4481e5a3",null);t["default"]=w.exports},acbb:function(e,t,n){"use strict";n("08f4")}}]);